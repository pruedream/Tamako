(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{409:function(v,_,t){"use strict";t.r(_);var r=t(4),e=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"什么是脏页-为什么刷盘-与redo有什么关系"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是脏页-为什么刷盘-与redo有什么关系"}},[v._v("#")]),v._v(" 什么是脏页，为什么刷盘，与redo有什么关系")]),v._v(" "),_("p",[v._v("当内存数据页跟磁盘数据页内容不一致的时候，我们称这个内存页为“脏页”。内存数据写入到磁盘后，内存和磁盘上的数据页的内容就一致了，称为“干净页”。 刷盘的目的在于将内存上的数据进行持久化，因为内存上的数据是不安全的，当出现系统宕机的时候，就会造成数据的丢失。")]),v._v(" "),_("p",[v._v("Mysql采用的是先写日志再写磁盘的方式来进行数据的持久化，而此处的写磁盘指的就是脏页的刷新。\n"),_("br"),_("br")]),v._v(" "),_("h2",{attrs:{id:"脏页刷盘的四种情况"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#脏页刷盘的四种情况"}},[v._v("#")]),v._v(" 脏页刷盘的四种情况")]),v._v(" "),_("p",[v._v("1.当 "),_("code",[v._v("redo log 写满")]),v._v("，mysql就会"),_("code",[v._v("暂停所有更新")]),v._v("操作，将同步这部分日志对应的"),_("code",[v._v("脏页同步到磁盘")]),v._v("。")]),v._v(" "),_("p",[v._v("2.系统"),_("code",[v._v("内存不足")]),v._v("时，需要"),_("code",[v._v("淘汰")]),v._v("一部分数据页，如果淘汰的是"),_("code",[v._v("脏页")]),v._v("，就要"),_("code",[v._v("先将脏页同步到磁盘")]),v._v("。")]),v._v(" "),_("p",[v._v("3.MySQL 认为系统"),_("code",[v._v("空闲")]),v._v("的时候,有机会就"),_("code",[v._v("同步")]),v._v("内存数据到磁盘，这种没有性能问题。")]),v._v(" "),_("p",[v._v("4."),_("code",[v._v("MySQL 正常关闭")]),v._v("，MySQL 会把"),_("code",[v._v("内存的脏页都同步到磁盘")]),v._v("上，这样下次 MySQL 启动的时候，就可以直接从磁盘上读数据，启动速度会很快。这种没有性能问题。\n"),_("br"),_("br")]),v._v(" "),_("h2",{attrs:{id:"脏页刷盘的影响"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#脏页刷盘的影响"}},[v._v("#")]),v._v(" 脏页刷盘的影响")]),v._v(" "),_("ol",[_("li",[v._v("一个查询要淘汰的脏页个数太多，会导致查询的响应时间明显变长。      内存不足")]),v._v(" "),_("li",[v._v("日志写满，更新全部堵住，写性能跌为 0，这种情况对敏感业务来说，是不能接受的 。     redo log 写满")])]),v._v(" "),_("p",[v._v("1和2会造成影响，3和4是不会对系统造成太大问题。")]),v._v(" "),_("p",[_("br"),_("br")]),v._v(" "),_("h2",{attrs:{id:"思考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[v._v("#")]),v._v(" 思考")]),v._v(" "),_("p",[v._v("了解脏页刷新机制以及相应的参数是很有必要的，当数据库系统某些性能问题时，要考虑是否是脏页刷新相关的配置参数不合理导致的。根据实际业务，考虑缓冲区的大小，redo log的大小，最少空闲页，脏页比例，io吞吐量相关参数是否配置合理，根据优化相关参数，解决系统问题。")]),v._v(" "),_("p",[v._v("参考")]),v._v(" "),_("ul",[_("li",[v._v("https://www.cnblogs.com/ging/p/13467898.html")]),v._v(" "),_("li",[v._v("https://www.modb.pro/db/71045")]),v._v(" "),_("li",[v._v("https://time.geekbang.org/column/article/71806")])])])}),[],!1,null,null,null);_.default=e.exports}}]);