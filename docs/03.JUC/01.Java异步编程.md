# Java异步编程



## 使用线程池一定会异步吗

异步的定义是指：主线程开启一个子线程来帮助自己执行一些耗时的任务，主线程可以继续执行自己的业务操作。



从上述定义可知，主线程不能被阻塞



如果你使用了阻塞式的任务执行方法，比如`Future.get()`方法获取任务的执行结果，那么主线程会在调用这些方法时被阻塞，直到任务执行完成并返回结果为止。在这种情况下，主线程会等待线程池中的任务执行完毕。

~~~java
ExecutorService executorService = Executors.newFixedThreadPool(5);
Future<Integer> future = executorService.submit(() -> {
    // 执行耗时操作
    return 42;
});

try {
    // 主线程会在此处阻塞，直到任务执行完成并返回结果
    Integer result = future.get();
    System.out.println("任务执行结果：" + result);
} catch (InterruptedException | ExecutionException e) {
    e.printStackTrace();
}

executorService.shutdown();

~~~

**注意：不是需要返回值就会阻塞，关键在于是否调用`Future.get()`方法获取任务的执行结果。**



不会阻塞

~~~java
ExecutorService executorService = Executors.newFixedThreadPool(5);
executorService.submit(() -> {
    // 执行耗时操作
    return 42;
});

// 主线程不会被阻塞，会继续执行下面的代码
System.out.println("主线程继续执行...");

executorService.shutdown();

~~~









![image-20240229104956663](https://raw.githubusercontent.com/pruedream/PictureBed/main/image/image-20240229104956663.png)
